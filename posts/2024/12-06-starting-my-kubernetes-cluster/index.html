<!doctype html>
<html class="not-ready lg:text-base" lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Title -->
  <title>
    Starting my Kubernetes Cluster, Part 1: Introduction - JWSCHMAN
  </title>

  <!-- Meta -->
  <meta name="theme-color" />

  
  <!-- Author -->
  
  <!---->
  
  <!---->
  
  <!---->
  
  <!---->
  
  <!---->
  <meta name="description" content="Documenting the first steps in my migration to Kubernetes" />
  <meta name="author" content="JW" />
  <!-- The Open Graph protocol -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Starting my Kubernetes Cluster, Part 1: Introduction" />
  <meta property="og:site_name" content="JWSCHMAN" />
  <meta property="og:description" content="Documenting the first steps in my migration to Kubernetes" />
  <meta property="og:url" content="https:&#x2F;&#x2F;jwschman.github.io&#x2F;posts&#x2F;2024&#x2F;12-06-starting-my-kubernetes-cluster&#x2F;" />
  
  <!---->
  
  <!---->
  
  <!---->
  
  <meta property="og:image" content="https://jwschman.github.io/cover-image.svg" />
  
  <!---->
  

  <!-- CSS & JS -->
  <link rel="preload stylesheet" as="style" href="https://jwschman.github.io/main.css" />
  <style>
    :root {
      --bg: #f4f4f5;
      --bg-dark: #18181b;
      --header: #e4e4e7;
      --header-dark: #27272a;
    }
  </style>

  <!-- Image Centering and Table Style Added by jwschman-->
  
  <link rel="stylesheet" href="https://jwschman.github.io/imagestyle.css" />
  <link rel="stylesheet" href="https://jwschman.github.io/tablestyle.css" />
  <link rel="stylesheet" href="https://jwschman.github.io/style.css" />


  

  <!-- Dark Icon -->
  <link rel="preload" as="image" href="https://jwschman.github.io/icons/theme.svg" />

  <!-- Math -->
  
  <!---->

  <!-- Mermaid -->
  
  <!---->

  <!-- Favicon -->
  <!-- Path changed by jwschman -->
  <link rel="icon" href="https://jwschman.github.io/icons/favicon.ico" />
  <link rel="apple-touch-icon" href="https://jwschman.github.io/apple-touch-icon.png" />

  <!-- Feeds -->
  

  <!-- Canonical -->
  <link rel="canonical" href="https:&#x2F;&#x2F;jwschman.github.io&#x2F;posts&#x2F;2024&#x2F;12-06-starting-my-kubernetes-cluster&#x2F;" />
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header
  class="header fixed top-0 z-40 mx-auto min-h-[3.5rem] w-full"
>
  <div class="mx-auto w-full max-w-4xl p-3 lg:flex lg:justify-between">
    <div class="flex justify-between">
      <div class="flex items-center">
        <a class="text-2xl font-semibold" href="https://jwschman.github.io">JWSCHMAN</a>
        <div
          class="btn-dark ml-4 h-6 w-6 shrink-0 cursor-pointer text-[0] [background:url(./icons/theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
          role="button"
          aria-label="Dark"
        ></div>
      </div>
      
      <div
        class="btn-menu relative z-50 flex h-8 w-8 shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
        role="button"
        aria-label="Menu"
      ></div>
      
    </div>
    <script>
      // base
      const htmlClass = document.documentElement.classList;
      setTimeout(() => {
        htmlClass.remove("not-ready");
      }, 10);

      // mobile menu
      const btnMenu = document.querySelector(".btn-menu");
      btnMenu?.addEventListener("click", () => {
        htmlClass.toggle("open");
      });

      // dark theme
      const setDark = (isDark) => {
        if (isDark) {
          document.body.dispatchEvent(new CustomEvent("set-theme", { detail: "dark" }));
          htmlClass.add("dark");
        } else {
          document.body.dispatchEvent(new CustomEvent("set-theme", { detail: "light" }));
          htmlClass.remove("dark");
        }
        localStorage.setItem("dark", isDark);
      };

      // init
      const darkScheme = window.matchMedia("(prefers-color-scheme: dark)");
      if (htmlClass.contains("dark")) {
        setDark(true);
      } else {
        const darkVal = localStorage.getItem("dark");
        setDark(darkVal ? darkVal === "true" : darkScheme.matches);
      }

      // listen system
      darkScheme.addEventListener("change", (event) => {
        setDark(event.matches);
      });

      // manual switch
      const btnDark = document.querySelector(".btn-dark");
      btnDark.addEventListener("click", () => {
        setDark(localStorage.getItem("dark") !== "true");
      });
    </script>
    
    <nav class="flex w-full items-center lg:w-auto">
      <ul
        class="nav-wrapper flex w-full flex-col py-2 lg:w-auto lg:flex-row lg:self-center lg:py-0"
      >
        
        <li>
          <a
            class="primary-link block py-2 text-center text-lg font-medium lg:px-3 lg:py-0"
            href="https://jwschman.github.io"
            >home</a
          >
        </li>
        
        <li>
          <a
            class="primary-link block py-2 text-center text-lg font-medium lg:px-3 lg:py-0"
            href="https://jwschman.github.io/posts"
            >posts</a
          >
        </li>
        
        <li>
          <a
            class="primary-link block py-2 text-center text-lg font-medium lg:px-3 lg:py-0"
            href="https://jwschman.github.io/projects"
            >projects</a
          >
        </li>
        
        <li>
          <a
            class="primary-link block py-2 text-center text-lg font-medium lg:px-3 lg:py-0"
            href="https://jwschman.github.io/contact"
            >contact</a
          >
        </li>
        
      </ul>
      <!-- Header Nav inject -->
      
    </nav>
    
  </div>
</header>


    <!-- Body Start inject -->
    

    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl break-words px-4 pb-16 pt-32 dark:prose-invert prose-pre:rounded-lg prose-img:rounded-lg"
    >

    
<article>
  <header class="mb-16">
    <h1 class="!my-0 pb-2.5">Starting my Kubernetes Cluster, Part 1: Introduction</h1>
    <div class="text-sm antialiased opacity-60">
  
  <time>2024-12-06</time>
  <!---->
  <!---->
  <!---->
  <!---->
  
  <span class="mx-1">&middot;</span>
  <span>JW</span>
  
</div>

  </header>

  <!---->
  <figure class="mb-12 mt-0">
    <img
      class="h-auto w-full rounded-lg"
      src="https://jwschman.github.io/posts/2024/12-06-starting-my-kubernetes-cluster/cover-image.svg"
      alt="cover"
    />
  </figure>
  

  <!-- Content -->
  <section><p>Over the past several months, I’ve been planning to migrate most of my services off the TrueNAS jails and onto a Kubernetes cluster, since Kubernetes is one of the things I've been focused on studying.  I can see the writing on the wall for FreeBSD and jails specifically in the TrueNAS world, and having a cluster of my own seemed like a good way to both learn Kubernetes and move away from the TrueNAS jails.  Back in the spring and summer I bought two used ThinkCentres off of Yahoo Auctions that I figured would make for good nodes.  I don't need anything beefy for this cluster, and all the files are going to continue to be stored on the TrueNAS server.</p>
<p>Just having the hardware and a vague understanding of Kubernetes wasn't enough to do my migration, though.  I had a very clear vision of how I wanted things to work, and also how I wanted to actually build the infrastructure.</p>
<h2 id="automation-first">Automation first</h2>
<p>When I'm working on something, I like to be able to wipe the slate clean and restart from scratch if things aren't going quite the way I like.  I don't want to deal with half installed programs that I used once, and then never looked at again.  So for this cluster I wanted to be able to learn as I go, and be able to wipe the servers clean and get them into a prepared state for me to try again.  That meant getting a freshly provisioned OS on physical hardware with as little interaction as possible.  I'll go over how I did this in a separate post in this series.  The end goal for this project is to be able to go from a set of completely wiped computers to a fully functional cluster without much work.</p>
<h2 id="keep-it-simple">Keep it simple</h2>
<p>Another of my goals for things for this cluster is to keep things as simple as I can.  Things on my TrueNAS server are a little more complicated than I'd like, and that's because I had very little idea what I was doing as I initially set it up, and definitely didn't have a plan.  And since several of the pieces are built in weird ways, I had to work around them, making things even more weird.  I want to avoid that completely with this Kubernetes cluster.  It's also one of the reasons why I want everything to be automated.  If something gets out of hand, I'll hopefully be able to scrap it and find an easier alternative way to do it.  So far, that goal has been achieved.</p>
<p>So those are the two main points I've been focusing on while going through this build.  I'd like to do separate writeups for all of the individual steps that I took along the way to get to my functioning cluster.  At the moment, here is my vague plan:</p>
<ul>
<li>Provisioning the hardware</li>
<li>Preparing the OS for Kubernetes, including installing the container manager</li>
<li>Installing and preparing Kubernetes</li>
<li>initializing the cluster with <code>kubeadm</code> and joining the worker node</li>
<li>NFS storage on TrueNAS</li>
<li>Getting all those services from jails going</li>
</ul>
<p>Things may change wildly in the future as this build comes along and I learn more about Kubernetes, but that's all part of the journey I'm on, and also why I'm trying to document it.</p>
<hr />
<h2 id="update-on-5-8-2025">Update on 5/8/2025</h2>
<p>So things did change, although <em>wildly</em> isn't really the adjective I'd use to describe them.  &quot;Adjust moderately&quot; might be a better phrase.  As expected things did change as I learned Kubernetes, and so did the scope of this project.  Most of those planned writeups I listed above will likely be consolidated into two or three articles in the near future, and now I have a list of new things to talk about.  I guess I should start working on those...</p>
</section>

  <hr />

  <!-- Post Taxonomies -->
  
<footer class="mt-12 flex flex-col">
  <!---->
  <!---->
  <!---->
  <!---->
  
  <div class="mb-2 flex flex-wrap">
    <span class="block-bg mb-1.5 mr-1.5 rounded-lg px-5 py-1.5">Tags </span>
    
    <a
      class="block-bg block-hover mb-1.5 mr-1.5 rounded-lg px-5 py-1.5 no-underline"
      href="https://jwschman.github.io/tags/kubernetes/"
      >kubernetes</a
    >
    
    <a
      class="block-bg block-hover mb-1.5 mr-1.5 rounded-lg px-5 py-1.5 no-underline"
      href="https://jwschman.github.io/tags/homelabo/"
      >homelabo</a
    >
    
  </div>
  
</footer>

<!---->

  <!-- Post Nav -->
  
<nav class="block-bg mt-12 flex flex-wrap rounded-lg text-lg">
  
  <a
    class="block-hover-mask flex min-w-[50%] grow items-center rounded-l-md p-6 pr-3 font-semibold no-underline"
    href="https:&#x2F;&#x2F;jwschman.github.io&#x2F;posts&#x2F;2024&#x2F;10-29-getting-started-with-certified-cloud-practitioner&#x2F;"
    ><span class="mr-1.5">←</span><span>AWS Certifications: Getting Started with Certified Cloud Practitioner</span></a
  >
  <!---->
  
  <a
    class="block-hover-mask ml-auto flex min-w-[50%] grow items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline"
    href="https:&#x2F;&#x2F;jwschman.github.io&#x2F;posts&#x2F;2025&#x2F;04-27-new-about-page&#x2F;"
    ><span>New About Page</span><span class="ml-1.5">→</span></a
  >
  
</nav>

<!---->

  <!-- Comment -->
  
</article>


    </main>

    <footer class="mx-auto flex max-w-3xl flex-wrap items-center px-8 py-4 text-sm opacity-60">
  <div class="mr-auto basis-full lg:basis-1/2">
    <!---->
    <!---->
    &copy; 2024 - 2025<!---->
    
    <a class="link" href="https://jwschman.github.io">
      JW
    </a>
     |<!---->
    <!---->
    <a class="link" href="https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-sa&#x2F;4.0&#x2F;deed" rel="noopener" target="_blank">
      CC BY-SA 4.0
    </a>
    <!---->
    
  </div>
  <div class="flex basis-full lg:basis-1/2 lg:justify-end">
    <a class="link mr-6 lg:ml-6" href="https://www.getzola.org/" rel="noopener" target="_blank">
      Powered by Zola
    </a>
    <a class="link" href="https://github.com/st1020/kita" rel="noopener" target="_blank">✎ Kita</a>
  </div>
  <!-- Footer inject -->
  
</footer>


    <!-- Body End inject -->
    
  </body>
</html>
